<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador Puter.js (Sem Key)</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        input, button { padding: 10px; margin: 5px; }
        #status { color: blue; }
        #imagem { max-width: 100%; margin-top: 20px; border: 1px solid #ccc; display: none; }
    </style>
    <script src="https://js.puter.com/v2/"></script>
</head>
<body>
    <h1>Gerador de Imagens Puter.js (Atualizado 2025)</h1>
    <input type="text" id="prompt" placeholder="Ex: um gato voando no espaço" style="width: 300px;">
    <button onclick="gerarImagem()">Gerar Imagem</button>
    <p id="status"></p>
    <img id="imagem" alt="Imagem gerada">

    <script>
        async function gerarImagem() {
            const prompt = document.getElementById('prompt').value;
            if (!prompt) return alert('Digite um prompt!');

            const status = document.getElementById('status');
            const img = document.getElementById('imagem');
            status.textContent = 'Gerando... Aguarde!';
            img.style.display = 'none';

            try {
                // Método certo: txt2img (do docs oficial)
                const imageElement = await puter.ai.txt2img(prompt, {
                    model: 'gpt-image-1',  // Gratuito e rápido; troque por 'dall-e-3' ou 'black-forest-labs/FLUX.1-schnell' pra top
                    quality: 'standard',  // 'hd' pra melhor
                    disable_safety_checker: true  // Fix: desliga filtro de segurança se prompt for "arriscado"
                });

                img.src = imageElement.src;
                img.style.display = 'block';
                status.textContent = 'Sucesso!';
            } catch (error) {
                console.error(error);
                status.textContent = 'Erro: ' + error.message + '. Checa console: pode ser rate limit (espera 1min), adblock ou prompt bloqueado. Tenta modelo diferente.';
            }
        }
    </script>
</body>
</html>
